<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Diary_hanjiang - 7&nbsp; Week_7 Classification 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Week_8.html" rel="next">
<link href="./Week_6.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Week_7.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Week_7 Classification 2</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Diary_hanjiang</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Week_1 Introduction to Remote Sensing</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Week_2 Xaringan</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Week_3 Corrections</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Week_4 Policy</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Week_5 Introduction to GEE</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week_6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Week_6 Classification 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week_7.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Week_7 Classification 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Week_8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Week_8 Temperature/SAR</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#summary" id="toc-summary" class="nav-link active" data-scroll-target="#summary"><span class="header-section-number">7.1</span> Summary</a>
  <ul class="collapse">
  <li><a href="#sub-pixel-classification" id="toc-sub-pixel-classification" class="nav-link" data-scroll-target="#sub-pixel-classification"><span class="header-section-number">7.1.1</span> Sub-pixel Classification</a></li>
  <li><a href="#object-based-image-analysis" id="toc-object-based-image-analysis" class="nav-link" data-scroll-target="#object-based-image-analysis"><span class="header-section-number">7.1.2</span> Object-Based Image Analysis</a></li>
  <li><a href="#accuracy-assessment" id="toc-accuracy-assessment" class="nav-link" data-scroll-target="#accuracy-assessment"><span class="header-section-number">7.1.3</span> Accuracy Assessment</a></li>
  <li><a href="#cross-validation" id="toc-cross-validation" class="nav-link" data-scroll-target="#cross-validation"><span class="header-section-number">7.1.4</span> Cross-validation</a></li>
  </ul></li>
  <li><a href="#application" id="toc-application" class="nav-link" data-scroll-target="#application"><span class="header-section-number">7.2</span> Application</a>
  <ul class="collapse">
  <li><a href="#obia" id="toc-obia" class="nav-link" data-scroll-target="#obia"><span class="header-section-number">7.2.1</span> OBIA</a></li>
  <li><a href="#sub-pixel-vs.-super-pixel-based" id="toc-sub-pixel-vs.-super-pixel-based" class="nav-link" data-scroll-target="#sub-pixel-vs.-super-pixel-based"><span class="header-section-number">7.2.2</span> Sub-Pixel vs.&nbsp;Super-pixel-based</a></li>
  </ul></li>
  <li><a href="#further-study-segmentation" id="toc-further-study-segmentation" class="nav-link" data-scroll-target="#further-study-segmentation"><span class="header-section-number">7.3</span> Further study-Segmentation</a></li>
  <li><a href="#reflection" id="toc-reflection" class="nav-link" data-scroll-target="#reflection"><span class="header-section-number">7.4</span> Reflection</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Week_7 Classification 2</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="summary" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="summary"><span class="header-section-number">7.1</span> Summary</h2>
<p>This week we further study the remote sensing classification, including land cover classification methods, sub-pixel analysis, accuracy assessment, and cross-validation techniques.</p>
<section id="sub-pixel-classification" class="level3" data-number="7.1.1">
<h3 data-number="7.1.1" class="anchored" data-anchor-id="sub-pixel-classification"><span class="header-section-number">7.1.1</span> Sub-pixel Classification</h3>
<p><strong>Sub-pixel classification</strong>, also known as <strong>Spectral Mixture Analysis (SMA)</strong> or Linear spectral unmixing, aims to identify the proportion of different land cover types within a single pixel, offering a more detailed understanding of pixel composition beyond the dominant land cover class. This technique relies on the premise that the observed reflectance of a pixel is a linear combination of the reflectances of pure land cover classes (endmembers), weighted by their fractional coverage within the pixel.</p>
</section>
<section id="object-based-image-analysis" class="level3" data-number="7.1.2">
<h3 data-number="7.1.2" class="anchored" data-anchor-id="object-based-image-analysis"><span class="header-section-number">7.1.2</span> Object-Based Image Analysis</h3>
<p><strong>Object-Based Image Analysis(OBIA)</strong> aims to segment image into a series of objects or regions for analysis, taking into account the shape, texture and context information of the object. OBIA is suitable for high-resolution images and can better handle complex structures and boundaries in images.</p>
</section>
<section id="accuracy-assessment" class="level3" data-number="7.1.3">
<h3 data-number="7.1.3" class="anchored" data-anchor-id="accuracy-assessment"><span class="header-section-number">7.1.3</span> Accuracy Assessment</h3>
<p>Accuracy assessment is crucial for evaluating the performance of land cover classification models. It involves comparing the classification output against a reference dataset (ground truth) to compute various accuracy metrics:</p>
<ul>
<li>Producer’s Accuracy (Recall): Indicates how well the classification matches the reference data from the perspective of the data producer.</li>
<li>User’s Accuracy (Precision): Reflects the reliability of the classification from the user’s point of view, showing how often the classified land cover type matches the reference data.</li>
<li>Overall Accuracy: The fraction of correctly classified pixels across all land cover types.</li>
<li>Kappa Coefficient: Measures agreement between the classification and the reference data, accounting for chance agreement.</li>
</ul>
</section>
<section id="cross-validation" class="level3" data-number="7.1.4">
<h3 data-number="7.1.4" class="anchored" data-anchor-id="cross-validation"><span class="header-section-number">7.1.4</span> Cross-validation</h3>
<p>Cross-validation is a robust method for assessing the generalizability of a classification model by partitioning the data into complementary subsets, training the model on one subset, and validating it on the other. <strong>Spatial cross-validation</strong> addresses the spatial autocorrelation between training and test sets by ensuring that spatially close observations are included in the same fold. This method is particularly relevant for geographic data, where spatial autocorrelation can artificially inflate model performance metrics.</p>
<p>This week emphasizes the importance of considering spatial autocorrelation in model training and validation. Spatially close data points are likely to have similar values, which can influence the model’s accuracy assessment if not properly addressed through techniques like spatial cross-validation.</p>
</section>
</section>
<section id="application" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="application"><span class="header-section-number">7.2</span> Application</h2>
<section id="obia" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1" class="anchored" data-anchor-id="obia"><span class="header-section-number">7.2.1</span> OBIA</h3>
<p>Here I read an essay introduce the application of the trajectory error matrix for assessing the temporal transferability of OBIA for slum detection. Considering the dynamic nature of urban development and the complexity of defining and identifying slum areas, the paper team chose to apply OBIA to test the slums in different time frames. In three months, the government completed the construction of a road for river inspection.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/jianghan0v0/Learning-diary-han-jiang/raw/main/images/wk7-5.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">(Source: Jati.P, 2018)</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/jianghan0v0/Learning-diary-han-jiang/raw/main/images/wk7-4.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">(Source: Jati.P, 2018)</figcaption>
</figure>
</div>
</div>
</div>
<p>Notably, this essay make TEM as a tool for assessing the temporal transferability of OBIA, which is innovative and insightful!</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/jianghan0v0/Learning-diary-han-jiang/raw/main/images/wk7-7.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">(Source: Jati.P, 2018)</figcaption>
</figure>
</div>
</div>
</div>
<p>However, the study also reveals that achieving high levels of accuracy and transferability requires careful consideration of local conditions, comprehensive reference data, and potentially, the integration of additional data sources or analytical layers to enhance OBIA’s sensitivity to nuanced urban changes. All in all, these essay is a nice caase study for me to understand how OBIA is applied in a project. <a href="https://doi.org/10.1080/22797254.2018.1496798">(OBIA)</a></p>
</section>
<section id="sub-pixel-vs.-super-pixel-based" class="level3" data-number="7.2.2">
<h3 data-number="7.2.2" class="anchored" data-anchor-id="sub-pixel-vs.-super-pixel-based"><span class="header-section-number">7.2.2</span> Sub-Pixel vs.&nbsp;Super-pixel-based</h3>
<p>During background reseach, I found super-sub-pixel and i’m really interested in these two’s differences. So i read the essay that using the Gaofen-2 high spatial resolution imagery to compare sub-pixel and super-pixel strategies for mapping urban and rural greenspaces.</p>
<p>Weida Yin and Jian Yang<a href="https://www.tandfonline.com/doi/figure/10.1080/01431161.2017.1354266?scroll=top&amp;needAccess=true">(2016)</a> explores the comparative effectiveness of sub-pixel and super-pixel strategies in mapping urban greenspaces using high-resolution satellite imagery.</p>
<p>For this figure, we can see from upper to lower the pictures represent multispectral imagery, sub-pixel result, super-pixel result. We can see that in the second row, the sub-pixel detects a mix of different features in one pixel and tries to quantify their respective proportions. The third line, as a superpixel result, shows that the image is split into larger blocks where the pixels within these blocks are similar in some properties and can therefore be processed as a whole.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://github.com/jianghan0v0/Learning-diary-han-jiang/raw/main/images/wk7-8.jpg" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">(Source: Weida.Y, 2016)</figcaption>
</figure>
</div>
</div>
</div>
<p>From this study, we can summarize their differences. First, in terms of resolution and detail, subpixel analysis can provide details beyond traditional pixel grids, while superpixels focus more on the similarity between pixels and the integrity of the region. Second, in terms of application purpose, subpixel method is more suitable for accurate detection and measurement, such as edge detection or fine feature classification. Superpixels are suitable for image segmentation and structured representation, which helps to improve the efficiency of subsequent analysis.</p>
<p><a href="https://www.tandfonline.com/doi/epdf/10.1080/19479832.2015.1055834?needAccess=true">Fakhereh.A, 2015</a> <a href="https://www.tandfonline.com/doi/full/10.1080/01431161.2017.1354266">Weida.Y, 2017</a></p>
</section>
</section>
<section id="further-study-segmentation" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="further-study-segmentation"><span class="header-section-number">7.3</span> Further study-Segmentation</h2>
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/2R0aTaMtYTY" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p>In a further exploration of image segmentation techniques, I delved into two very interesting techniques by reading the literature: Simple Linear Iterative Clustering (SLIC) and its improved version, Simple Non-Iterative Clustering<a href="https://openaccess.thecvf.com/content_cvpr_2017/papers/Achanta_Superpixels_and_Polygons_CVPR_2017_paper.pdf">(SNIC)</a>.</p>
<p>SLIC was the first superpixel segmentation algorithm I came across. It clusters pixels by performing local K-means optimization within a five-dimensional space (color and spatial coordinates). The charm of SLIC is that it is simple and efficient, requiring only two input parameters: the number of superpixels required and the compactness factor that controls the compactness of the superpixels. However, the difficulty of learning SLIC lies in understanding its iterative process and how to select the appropriate parameters to achieve the best segmentation effect. In addition, SLIC requires multiple iterations to converge during processing, which means that time efficiency can be a challenge when working with very large image sets.</p>
<p>However, SNIC offers a faster and less memory-intensive segmentation method than SLIC. By updating the center of mass directly in a single iteration and explicitly enforcing connectivity from the start, SNIC effectively addresses some of the limitations that exist with SLIC. I think the main difficulty in learning SNIC is to understand how it uses the priority queue to select the next pixel to be added to the cluster, and the process of updating the center of mass online.</p>
</section>
<section id="reflection" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="reflection"><span class="header-section-number">7.4</span> Reflection</h2>
<p>OBIA is a powerful tool that can adapt to complex environmental data, however, it relies heavily on the high accuracy of remote sensing data, which makes it very sensitive to accuracy, which is actually a disadvantage for practical project operations. So, what can be done to make up for this disadvantage? I made the following summary: * First method I recommand is machine deep learning, use advanced machine learning and deep learning algorithms can extract useful information from lower resolution data, improving the accuracy of classification and recognition. * Secondly, combining data from different sources and resolutions, such as combining high-resolution optical images with radar data, can improve the accuracy and robustness of the analysis. It’s inevitable to meet many difficulties in the application of OBIA,</p>
<p>And for pixel-based analysis, sub-pixel and super-pixel, it’s interesting to summarize their peculiarity and application areas together. Subpixel technology is often used in scenes requiring high precision analysis, such as fine classification of remote sensing images. Superpixel technology is suitable for applications where analysis can be performed efficiently on a larger scale, such as object recognition or scene understanding. These all deserve to further study. ## Reference Jati Pratomo, Monika Kuffer, Divyani Kohli &amp; Javier Martinez (2018) Application of the trajectory error matrix for assessing the temporal transferability of OBIA for slum detection, European Journal of Remote Sensing, 51:1, 838-849, DOI: 10.1080/22797254.2018.1496798</p>
<p>Duro, D. C., Franklin, S. E., &amp; Dubé, M. G. (2012). Multi-scale Object-Based Image Analysis and Feature Selection of Multi-sensor Earth Observation Imagery Using Random Forests. International Journal of Remote Sensing, 33(14), 4502-4526.</p>
<p>Wang, F., Wang, M., &amp; Liu, Z. (2015). Wetland Change Detection Using Object-Based Image Analysis and Open-Source Remote Sensing Data in the Niger Delta, Nigeria. Wetlands, 35(1), 11-23.</p>
<p>Hansen, M. C., Potapov, P. V., Moore, R., Hancher, M., Turubanova, S. A., Tyukavina, A., Thau, D., Stehman, S. V., Goetz, S. J., Loveland, T. R., Kommareddy, A., Egorov, A., Chini, L., Justice, C. O., &amp; Townshend, J. R. G. (2013). High-Resolution Global Maps of 21st-Century Forest Cover Change. Science, 342(6160), 850-853.</p>
<p>Friedl, M. A., Sulla-Menashe, D., Tan, B., Schneider, A., Ramankutty, N., Sibley, A., &amp; Huang, X. (2010). MODIS Collection 5 Global Land Cover: Algorithm Refinements and Characterization of New Datasets. Remote Sensing of Environment, 114(1), 168-182.</p>
<p>Weida Yin &amp; Jian Yang (2017) Sub-pixel vs.&nbsp;super-pixel-based greenspace mapping along the urban–rural gradient using high spatial resolution Gaofen-2 satellite imagery: a case study of Haidian District, Beijing, China, International Journal of Remote Sensing, 38:22, 6386-6406, DOI: 10.1080/01431161.2017.1354266</p>
<p>S Gokool, Es Riddell, C Jarmain, Kt Chetty, G Feig &amp; H Thenga. (2020) Evaluating the accuracy of satellite-derived evapotranspiration estimates acquired during conditions of water stress. International Journal of Remote Sensing 41:2, pages 704-724.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Week_6.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Week_6 Classification 1</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Week_8.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Week_8 Temperature/SAR</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>